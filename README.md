# canCorpus
Open this project in ICP Ninja:

[![](https://icp.ninja/assets/open.svg)](https://icp.ninja/i?g=https://github.com/XenomLight/canCorpus)

canCorpus is a lightweight Internet Computer dapp that provides a simple customer-service assistant, powered by a Motoko canister and a React-based chat UI. **II Login Required for admin's priveleges**

---

## Key features

- Powered by an LLM canister, enabling responses beyond the predefined FAQ.

- Admins can easily add new entries (text) to expand the dataset based on customer needs.

- Entries Management: Admin has full CRUD access to the dataset.

- Authentication: The frontend integrates Internet Identity (II) for secure login and role assignment.

- Chunking method: stored system messages are sent to the LLM in small chunks to avoid message-size limits; the canister checks each chunk and returns the first non-apology answer (or a standard apology if none match).
---

## Tech stack

- **Backend:** Motoko (canister runtime) with the `mo:llm` helper (via mops) for talking to an on-network LLM.
- **Frontend:** React + Vite (JSX), SCSS for styles.
- **Authentication:** Internet Identity (II) via `@dfinity/auth-client`.
- **Canister bindings:** autogenerated declarations from `dfx generate` (exports in `src/declarations`).
- **Tooling:** `dfx` (DFINITY SDK), `mops` for Motoko dependencies, `npm`/Vite for frontend dev server.
- **Languages:** Motoko for backend, JavaScript / JSX for frontend.

## Models

- Supported on-network models (via the `mo:llm` helper):
	- `#Llama3_1_8B` — Llama 3.1 8B model (used by default in this project)
	- `#Qwen3_32B` — Qwen 3 32B model
	- `#Llama4Scout` — Llama 4 Scout model

- The backend currently sends chat requests using `#Llama3_1_8B` by default. You can switch models by updating the Motoko call site in `src/canCorpus_backend/main.mo`.

## Prerequisites

- DFINITY SDK (`dfx`) installed and on your PATH. See https://internetcomputer.org/docs for installation instructions.
- Node.js (16+) and npm or pnpm for the frontend. Verify with `node -v` and `npm -v`.
- `mops` if you plan to manage Motoko dependencies locally (the project already includes `.mops`).
- For local authentication testing, ensure the local Internet Identity canister is available (dfx handles this when the replica is running).

## Quick start (Windows PowerShell)

### 1) Start the local replica and deploy canisters

```powershell
dfx start --background
dfx deploy
```

### 2) Start frontend

```powershell
cd src/canCorpus_frontend
npm install
npm run start
```

Open the frontend URL shown by Vite (default port 3000).

---

## NOTE: Admin rule (first-time login)

- The canister stores an `adminPrincipal`.
- On the first call to `addEntry`, if `adminPrincipal` is null the canister sets it to the caller Principal. That caller becomes the admin.
- Only the admin principal may call `addEntry`, `editEntry`, `deleteEntry` and `clearEntries`. Other principals will receive an "Unauthorized" or "Failed to.." error.

---

## Developer notes

- Backend: `src/canCorpus_backend/main.mo` (Motoko)
- Frontend: `src/canCorpus_frontend` (React + Vite)
- Declarations: `src/declarations` (generated by `dfx generate` / `dfx deploy`)
---



